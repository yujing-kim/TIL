# SSH ì ‘ì†ê³¼ staticIP ì„¤ì •

# ğŸ‘¯ ê³„ì • ì „í™˜

- root â†’ubuntu :  `su ubuntu`
- ubuntu â†’ root : `sudu su`

# ğŸŒï¸ ubuntuì— ssh ì„¤ì¹˜

1. `sudo apt install openssh-server`
    - ì˜ì¡´ì„± ë¬¸ì œ

        root@server:/home/ubuntu# apt install openssh-server
        íŒ¨í‚¤ì§€ ëª©ë¡ì„ ì½ëŠ” ì¤‘ì…ë‹ˆë‹¤... ì™„ë£Œ
        ì˜ì¡´ì„± íŠ¸ë¦¬ë¥¼ ë§Œë“œëŠ” ì¤‘ì…ë‹ˆë‹¤
        ìƒíƒœ ì •ë³´ë¥¼ ì½ëŠ” ì¤‘ì…ë‹ˆë‹¤... ì™„ë£Œ
        ëª‡ëª‡ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìš”ì²­í•œ ìƒí™©ì´ ë¶ˆê°€ëŠ¥í•  ìˆ˜ë„ ìˆê³ ,
        ë¶ˆì•ˆì • ë°°í¬íŒì„ ì‚¬ìš©í•´ì„œ ì¼ë¶€ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì•„ì§ ë§Œë“¤ì§€ ì•Šì•˜ê±°ë‚˜,
        ì•„ì§ Incomingì—ì„œ ë‚˜ì˜¤ì§€ ì•Šì€ ê²½ìš°ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
        ì´ ìƒí™©ì„ í•´ê²°í•˜ëŠ”ë° ë‹¤ìŒ ì •ë³´ê°€ ë„ì›€ì´ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

        ë‹¤ìŒ íŒ¨í‚¤ì§€ì˜ ì˜ì¡´ì„±ì´ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤:
        openssh-server : ì˜ì¡´: openssh-client (= 1:7.2p2-4)
        ì˜ì¡´: openssh-sftp-server í•˜ì§€ë§Œ %s íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤
        ì¶”ì²œ: ssh-import-id í•˜ì§€ë§Œ %s íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤
        E: ë¬¸ì œë¥¼ ë°”ë¡œì¡ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë§ê°€ì§„ ê³ ì • íŒ¨í‚¤ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

    - í•´ê²°

        apt install openssh-client=1:7.2p2-4

2. no route to host  ..
    - í•´ê²°
        - ë‘ ë„¤íŠ¸ì›Œí¬ê°€ NAT network ì¸ì§€ í™•ì¸í•˜ê¸°
        - ipë¥¼ í™•ì¸í•˜ê¸°

---

# ğŸ‘°ğŸ» server, server(B), mac os ê°„ ssh ì ‘ì† (Bridge)

![12/Untitled.png](1/Untitled12.png)

â†’ ì–´ëŒ‘í„°ì— ë¸Œë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²° ê°€ëŠ¥

1. ubuntu ì—ì„œ macìœ¼ë¡œ ì ‘ì†

    ssh [gim-yujin@192.168.35.47](mailto:gim-yujin@192.168.35.47)

2. macì—ì„œ ubuntu(server)ë¡œ ì ‘ì†

    ssh ubuntu@192.168.35.36

3. macì—ì„œ ubuntu(server_b)ë¡œ ì ‘ì†

    ssh ubuntu@192.168.35.11

- ì°¸ê³ 

    [https://m.blog.naver.com/PostView.nhn?blogId=fewus28&logNo=221071674293&proxyReferer=https:%2F%2Fwww.google.com%2F](https://m.blog.naver.com/PostView.nhn?blogId=fewus28&logNo=221071674293&proxyReferer=https:%2F%2Fwww.google.com%2F)

í•˜ì§€ë§Œ,

â†’ Bridge NetworkëŠ” Virtualboxê°€ í˜¸ìŠ¤íŠ¸ì— ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ì´ë‹¤.

â†’ í˜¸ìŠ¤íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ê·¸ëŒ€ë¡œ ì´ìš©í–˜ ìˆ˜ ìˆìœ¼ë©°, VMì´ í˜¸ìŠ¤íŠ¸ì™€ ê°™ì€ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ì— ì¡´ì¬í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

â†’ ì¦‰, VirtualBoxì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ NAT Networkë¡œì˜ ë³€í™˜ì´ í•„ìš”í•©ë‹ˆë‹¤

---

# â­ statuc IP (NAT networkì—ì„œ!)

- Server : 10.0.2.100
- Server(B) : 10.0.2.200

â†’ ê³ ì •IPë¡œ ë³€í™˜ ì™„ë£Œ!

- Trouble shooting
    1. 10.0.2..xx ë¡œ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.â†’ vbì—ì„œ ì§€ì›í•´ì£¼ëŠ” ì£¼ì†Œ ê³µê°„ì„ ì‚¬ìš©í•´ì•¼í•œë‹¤. 
    2. : ë’¤ì—ëŠ” ê³µë°±ì´ ê¼­ í•„ìš”í•˜ë‹¤. (tabì€ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.)

## Server (ubuntu desktop) ê³ ì • IP

êµì¬(p153)ì°¸ê³ 

```python
nm-connection-editer
```

![13/Untitled%201.png](1/Untitled13.png)

## Server_b ê³ ì • IP

```python
ubuntu@server-b:~$ sudo su
[sudo] password for ubuntu: ubuntu

root@server-b:/home/ubuntu# cd
root@server-b:~# ls /etc/netplan/	â‡ ë„¤íŠ¸ì›Œí¬ ì„¤ì • íŒŒì¼ì„ í™•ì¸
50-cloud-init.yaml

root@server-b:~# cp /etc/netplan/50-cloud-init.yaml /etc/netplan/50-cloud-init.yaml.bak	  # ë°±ì—… íŒŒì¼ ìƒì„±
root@server-b:~# vi /etc/netplan/50-cloud-init.yaml	 #ë„¤íŠ¸ì›Œí¬ ì„¤ì • íŒŒì¼ì„ í¸ì§‘
```

- `50-cloud-init.yaml` ìˆ˜ì •í•˜ê¸°

```python
network:
    ethernets:
        enp0s3:
            dhcp4: false
            addresses: [10.0.2.200/24]
            gateway4: 10.0.2.1
            nameservers:
                addresses: [8.8.8.8]
    version: 2
```

- ì ìš©í•˜ê¸°, í™•ì¸í•˜ê¸°

```python
root@server-b:~# netplan apply

root@server-b:~# hostname -I
10.0.2.200
```

### ** MACì—ì„œ ì ‘ì†

- macì€ ìœˆë„ìš° ì²˜ëŸ¼ en0: ì˜ inetì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.
- VBoxìš© ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

    ![14/Untitled%202.png](1/Untitled14.png)

    â†’ ì²˜ìŒì—ëŠ” inet 192.168.59.3ì´ ë‚˜ì˜¤ì§€ ì•Šì•˜ë‹¤...

    - í•´ê²°
        - hostì—ì„œ VBoxManage ëª…ë ¹ì„ í†µí•´ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.
        - Nat Networkë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•

        ```python
        # í˜„ì¬ ìƒì„±ë˜ì–´ìˆëŠ” NAT Network ëª©ë¡ ì¡°íšŒ
        $ VBoxManage list natnetworks
         
        # 192.168.0.0/24 ëŒ€ì—­ì˜ DHCP ê¸°ëŠ¥ì´ ìˆëŠ” NAT Network ìƒì„±
        $ VBoxManage natnetwork add --netname natnet1 --network "192.168.0.0/24" --enable --dhcp on
         
        # ìœ„ì—ì„œ ìƒì„±í•œ 'natnet1' NAT Network ì‹œì‘í•˜ê¸°
        $ VBoxManage natnetwork start --netname natnet1
         
        # 'natnet1' NAT Network ì‚­ì œí•˜ê¸°
        $ VBoxManage natnetwork remove --netname natnet1
        ```

    - ì°¸ê³ ë§í¬
        1. NAT network í™˜ê²½ êµ¬ì„±

            [Virtualbox ë„¤íŠ¸ì›Œí¬ ì¢…ë¥˜ì™€ ì„¤ì • ë°©ë²•](https://indienote.tistory.com/258)

        2. Macì—ì„œ ssh ì ‘ì†í•˜ê¸°

            [Virtual Box SSH ì ‘ì†(NAT network), í¬íŠ¸í¬ì›Œë”©ìœ¼ë¡œ ì›ê²©ì ‘ì†](https://hongku.tistory.com/179)

        3. ë°©í™”ë²½ ì‚¬ìš©ë²• (ufw)

            [[Ubuntu] ìš°ë¶„íˆ¬ ë°©í™”ë²½(UFW) ì„¤ì •](https://webdir.tistory.com/206)

        4. ìœˆë„ìš°ì™€ ë§¥ì˜ ì°¨ì´ì 

            [[ì‚½ì§ˆ]ë²„ì² ë°•ìŠ¤ ë„¤íŠ¸ì›Œí¬ ì„¤ì •í•˜ê¸° - ë§¥ë¶ê³¼ ìœˆë„ìš°ì˜ ì°¨ì´ì ](https://naleejang.tistory.com/167)